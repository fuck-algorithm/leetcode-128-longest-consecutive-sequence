# Implementation Plan

- [x] 1. 项目基础设施搭建
  - [x] 1.1 配置开发端口和构建设置
    - 修改vite.config.ts，使用30000-65535范围内的随机端口
    - 配置GitHub Pages部署的base路径
    - _Requirements: 10.1, 10.2_
  - [x] 1.2 创建GitHub Actions部署工作流
    - 创建.github/workflows/deploy.yml
    - 配置自动构建和部署到GitHub Pages
    - _Requirements: 10.1, 10.2, 10.3_
  - [x] 1.3 完善.gitignore和README
    - 确保node_modules等不被提交
    - 更新README为简洁的项目说明和在线演示链接
    - _Requirements: 11.3, 12.1, 12.2_

- [x] 2. IndexedDB缓存服务实现
  - [x] 2.1 创建IndexedDB工具模块
    - 实现数据库初始化、读取、写入功能
    - 支持Star数缓存（1小时有效期）
    - 支持用户设置缓存（语言选择、播放速度）
    - _Requirements: 2.5, 2.6, 2.7, 4.2, 6.9, 6.10_
  - [x] 2.2 编写IndexedDB缓存属性测试
    - **Property 8: 缓存有效期**
    - **Validates: Requirements 2.5**

- [x] 3. 输入验证和数据生成模块
  - [x] 3.1 实现输入验证函数
    - 支持数组格式解析（[1,2,3]或1,2,3）
    - 验证数组长度不超过100
    - 验证数值在-10^9到10^9之间
    - 返回详细错误信息
    - _Requirements: 3.2, 3.6, 3.7_
  - [x] 3.2 编写输入验证属性测试
    - **Property 1: 输入验证一致性**
    - **Validates: Requirements 3.6, 3.7**
  - [x] 3.3 实现随机数据生成函数
    - 生成长度5-20的数组
    - 数值范围-50到50
    - 确保生成的数据能产生有意义的连续序列
    - _Requirements: 3.5_
  - [x] 3.4 编写随机数据生成属性测试
    - **Property 2: 随机数据合法性**
    - **Validates: Requirements 3.5**

- [-] 4. 算法步骤生成引擎
  - [ ] 4.1 定义算法步骤数据结构
    - 创建AlgorithmStep、VariableState、VisualizationState类型
    - 定义多语言代码行号映射机制
    - _Requirements: 4.3, 5.4, 5.5_
  - [ ] 4.2 实现最长连续序列算法步骤生成器
    - 生成详细的分步骤执行过程
    - 每步包含代码行号、变量状态、可视化状态、描述
    - 支持HashSet构建、序列查找、最长序列更新等阶段
    - _Requirements: 4.3, 4.4, 5.4, 5.5, 5.6, 5.7_
  - [ ] 4.3 编写代码行号映射属性测试
    - **Property 6: 代码行号映射一致性**
    - **Validates: Requirements 4.3**
  - [ ] 4.4 编写变量值展示属性测试
    - **Property 7: 变量值展示正确性**
    - **Validates: Requirements 4.4**

- [ ] 5. 多语言代码定义
  - [ ] 5.1 创建四种语言的算法代码
    - Java实现代码
    - Python实现代码
    - Golang实现代码
    - JavaScript实现代码
    - 确保代码格式正确、缩进一致
    - _Requirements: 4.1, 4.5, 4.6, 4.7_
  - [ ] 5.2 实现代码行号与步骤的映射
    - 为每种语言定义行号映射表
    - 确保步骤与代码行正确对应
    - _Requirements: 4.3_

- [ ] 6. Checkpoint - 确保所有测试通过
  - 确保所有测试通过，如有问题请询问用户。

- [ ] 7. Header组件实现
  - [ ] 7.1 实现页面标题和LeetCode链接
    - 展示"128. 最长连续序列"标题
    - 点击标题在新标签页打开LeetCode题目页面
    - 设置浏览器标签页标题
    - _Requirements: 1.1, 1.2, 1.3_
  - [ ] 7.2 实现GitHub徽标和Star数展示
    - 展示GitHub图标，点击跳转到仓库
    - 调用GitHub API获取Star数
    - 使用IndexedDB缓存Star数（1小时有效期）
    - 鼠标悬停显示提示文字
    - _Requirements: 2.1, 2.2, 2.3, 2.4, 2.5, 2.6, 2.7_

- [ ] 8. InputPanel组件实现
  - [ ] 8.1 实现数据输入界面
    - 创建输入框支持自定义数据输入
    - 平铺展示预设数据样例
    - 添加随机生成按钮
    - 紧凑布局适应单屏幕
    - _Requirements: 3.1, 3.2, 3.3, 3.4, 3.5_
  - [ ] 8.2 集成输入验证
    - 提交时验证数据合法性
    - 显示具体错误提示信息
    - _Requirements: 3.6, 3.7_

- [ ] 9. CodePanel组件实现
  - [ ] 9.1 实现代码展示基础功能
    - 展示代码并显示行号
    - 实现语法高亮（关键字、变量、字符串等）
    - 确保代码对齐正确
    - 调整代码框尺寸避免滚动条
    - _Requirements: 4.1, 4.5, 4.6, 4.7, 4.8_
  - [ ] 9.2 实现语言切换功能
    - 支持Java、Python、Golang、JavaScript切换
    - 使用IndexedDB记住用户语言选择
    - _Requirements: 4.1, 4.2_
  - [ ] 9.3 实现调试模式功能
    - 高亮当前执行的代码行
    - 在代码行后方展示变量内存值
    - _Requirements: 4.3, 4.4_

- [ ] 10. Canvas组件实现
  - [ ] 10.1 实现D3.js画布基础功能
    - 创建SVG画布占据页面大部分空间
    - 实现拖动平移功能
    - 实现滚轮缩放功能
    - _Requirements: 5.1, 5.2, 5.3_
  - [ ] 10.2 实现原始数组可视化
    - 绘制原始数组元素
    - 用颜色高亮当前操作的元素
    - _Requirements: 5.4, 5.6_
  - [ ] 10.3 实现HashSet数据结构可视化
    - 绘制HashSet容器和内容
    - 展示元素添加过程
    - 清晰展示key-value结构
    - _Requirements: 5.5_
  - [ ] 10.4 实现序列可视化
    - 用颜色区分当前序列和最长序列
    - 展示序列查找过程
    - _Requirements: 5.7_
  - [ ] 10.5 实现数据流和状态转移可视化
    - 使用箭头指示数据流向
    - 在箭头旁添加文字说明
    - 在节点上方展示状态变更标签
    - _Requirements: 5.8, 5.9_
  - [ ] 10.6 优化画布布局
    - 确保元素分散布局避免重叠
    - 大型数据结构自动调整视图
    - _Requirements: 5.10, 5.11_
  - [ ] 10.7 编写画布元素不重叠属性测试
    - **Property 9: 画布元素不重叠**
    - **Validates: Requirements 5.10**

- [ ] 11. ControlPanel组件实现
  - [ ] 11.1 实现播放控制按钮
    - 上一步按钮（绑定左方向键）
    - 下一步按钮（绑定右方向键）
    - 播放/暂停按钮（绑定空格键）
    - 重置按钮（绑定R键）
    - 按钮上显示快捷键文案
    - _Requirements: 6.1, 6.2, 6.3, 6.4, 6.5, 6.6_
  - [ ] 11.2 编写步骤导航边界属性测试
    - **Property 3: 步骤导航边界**
    - **Validates: Requirements 6.2, 6.3**
  - [ ] 11.3 编写播放状态切换属性测试
    - **Property 4: 播放状态切换**
    - **Validates: Requirements 6.4**
  - [ ] 11.4 实现播放速度控制
    - 自定义速度控制器（非原生组件）
    - 默认速度1x
    - 使用IndexedDB保存和恢复速度设置
    - _Requirements: 6.7, 6.8, 6.9, 6.10_

- [ ] 12. ProgressBar组件实现
  - [ ] 12.1 实现进度条展示
    - 在控制面板底部展示占满宽度的进度条
    - 已播放部分显示绿色，未播放部分显示灰色
    - _Requirements: 7.1, 7.2_
  - [ ] 12.2 实现进度条拖动功能
    - 支持鼠标拖动跳转到对应步骤
    - 实时更新进度条位置
    - _Requirements: 7.3, 7.4_
  - [ ] 12.3 编写进度条同步属性测试
    - **Property 5: 进度条同步**
    - **Validates: Requirements 7.3, 7.4**

- [ ] 13. WechatFloat组件实现
  - [ ] 13.1 实现微信交流群悬浮球
    - 在页面右下角展示带"交流群"字样的微信群图标
    - 鼠标悬停展示微信二维码图片
    - 保持图片原始比例
    - 提示用户扫码发送"leetcode"加入交流群
    - _Requirements: 8.1, 8.2, 8.3_

- [ ] 14. 页面配色和样式优化
  - [ ] 14.1 统一页面配色方案
    - 使用协调统一的配色
    - 确保不包含任何紫色色调
    - 保持单屏幕布局
    - _Requirements: 9.1, 9.2, 9.3_
  - [ ] 14.2 编写颜色无紫色属性测试
    - **Property 10: 颜色无紫色**
    - **Validates: Requirements 9.2**

- [ ] 15. App组件集成
  - [ ] 15.1 集成所有组件
    - 组装Header、InputPanel、CodePanel、Canvas、ControlPanel、ProgressBar、WechatFloat
    - 实现组件间状态管理
    - 实现键盘快捷键全局监听
    - _Requirements: 所有_
  - [ ] 15.2 实现播放逻辑
    - 自动播放时按速度推进步骤
    - 步骤变化时同步更新所有组件
    - _Requirements: 6.4, 6.8_

- [ ] 16. Checkpoint - 确保所有测试通过
  - 确保所有测试通过，如有问题请询问用户。

- [ ] 17. 最终验收和部署
  - [ ] 17.1 代码质量检查
    - 确保无TypeScript编译错误
    - 确保无ESLint错误
    - _Requirements: 11.1, 11.2_
  - [ ] 17.2 功能验收测试
    - 使用Playwright MCP测试所有功能点
    - 验证页面标题、GitHub徽标、数据输入、代码展示、画布可视化、播放控制、进度条、微信悬浮球
    - _Requirements: 所有_
